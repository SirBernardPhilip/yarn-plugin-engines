/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-engines",
factory: function (require) {
var plugin=(()=>{var b=Object.create,g=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var $=Object.getOwnPropertyNames,w=Object.getOwnPropertySymbols,O=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var R=(n,e,r)=>e in n?g(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,E=(n,e)=>{for(var r in e||(e={}))x.call(e,r)&&R(n,r,e[r]);if(w)for(var r of w(e))T.call(e,r)&&R(n,r,e[r]);return n};var j=n=>g(n,"__esModule",{value:!0});var m=n=>{if(typeof require!="undefined")return require(n);throw new Error('Dynamic require of "'+n+'" is not supported')};var W=(n,e)=>{for(var r in e)g(n,r,{get:e[r],enumerable:!0})},q=(n,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of $(e))!x.call(n,t)&&t!=="default"&&g(n,t,{get:()=>e[t],enumerable:!(r=_(e,t))||r.enumerable});return n},d=n=>q(j(g(n!=null?b(O(n)):{},"default",n&&n.__esModule&&"default"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);var A={};W(A,{default:()=>U});var s=d(m("@yarnpkg/core")),c;(function(r){r.Yarn="Yarn",r.Console="Console"})(c||(c={}));var a=class{constructor(e){this.throwWrongEngineError=(e,r,t,o)=>{let i=this.formatErrorMessage(e,r,t,o);this.throwError(i)};this.throwError=e=>{switch(this.errorReporter){case c.Yarn:this.reportYarnError(e);break;case c.Console:default:this.reportConsoleError(e);break}};this.reportYarnError=e=>{throw new s.ReportError(s.MessageName.UNNAMED,e)};this.reportConsoleError=e=>{console.error(e),process.exit(1)};this.formatErrorMessage=(e,r,t,o)=>{let{configuration:i}=this.project,h=s.formatUtils.applyStyle(i,s.formatUtils.pretty(i,this.engine,"green"),2),v=s.formatUtils.applyStyle(i,s.formatUtils.pretty(i,`[${t}]:`,"yellow"),2),p=s.formatUtils.applyStyle(i,s.formatUtils.pretty(i,`(${o}): `,"yellow"),2),l=s.formatUtils.pretty(i,e,"cyan"),f=s.formatUtils.pretty(i,r,"cyan"),C=`${v} The current ${h} version ${l} does not satisfy the required version ${f} ${p}.`;return s.formatUtils.pretty(i,C,"red")};this.project=e.project,this.errorReporter=e.errorReporter}};var P=d(m("semver"));var y=class extends a{get engine(){return"Node"}verifyEngine(e,r,t){let o=e.node;o!=null&&((0,P.satisfies)(process.version,o,{includePrerelease:!0})||this.throwWrongEngineError(process.version.replace(/^v/i,""),o.replace(/^v/i,""),r,t))}};var Y=d(m("semver")),u=d(m("@yarnpkg/core"));var k=class extends a{get engine(){return"Yarn"}verifyEngine(e,r,t){let o=e.yarn;o!=null&&((0,Y.satisfies)(u.YarnVersion,o,{includePrerelease:!0})||this.throwWrongEngineError(u.YarnVersion,o,r,t))}};var N=(n,e)=>(r,t)=>{var p,l;if(process.env.PLUGIN_YARN_ENGINES_DISABLE!=null)return;let o=r.getWorkspaceByCwd(r.cwd).manifest.raw,i=r.getWorkspaceByCwd(r.configuration.startingCwd).manifest.raw,h=(p=e?o.engines:E(E({},o.engines),i.engines))!=null?p:{};if(!(e?[]:(l=i.ignoreEngines)!=null?l:[]).includes(t.npm_lifecycle_event)){let f={project:r,errorReporter:n};[new y(f),new k(f)].forEach(S=>S.verifyEngine(h,e?"install":t.npm_lifecycle_event,e?r.cwd:r.configuration.startingCwd))}},M={hooks:{validateProject:N(c.Yarn,!0),setupScriptEnvironment:N(c.Console,!1)}},U=M;return A;})();
return plugin;
}
};
